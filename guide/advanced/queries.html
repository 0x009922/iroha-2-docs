<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Queries | Hyperledger Iroha 2 Tutorial</title>
    <meta name="description" content="Documented tutorial for Hyperledger Iroha 2 outlining the main differences between Iroha versions along with a walkthrough and additional resources.">
    <link rel="stylesheet" href="/iroha-2-docs/assets/style.177f999f.css">
    <link rel="modulepreload" href="/iroha-2-docs/assets/chunks/AlgoliaSearchBox.1931a2e2.js">
    <link rel="modulepreload" href="/iroha-2-docs/assets/app.0f261f37.js">
    <link rel="modulepreload" href="/iroha-2-docs/assets/guide_advanced_queries.md.97fa285d.lean.js">
    
    <meta name="twitter:title" content="Queries | Hyperledger Iroha 2 Tutorial">
  <meta property="og:title" content="Queries | Hyperledger Iroha 2 Tutorial">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-2170b094><div class="sidebar-button" data-v-2170b094><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/iroha-2-docs/" aria-label="Hyperledger Iroha 2 Tutorial, back to home" data-v-2170b094 data-v-d97bc718><img class="logo" src="/iroha-2-docs/logo.svg" alt="Logo" data-v-d97bc718> Hyperledger Iroha 2 Tutorial</a><div class="flex-grow" data-v-2170b094></div><div class="nav" data-v-2170b094><nav class="nav-links" data-v-2170b094 data-v-2b096b62><!--[--><div class="item" data-v-2b096b62><div class="nav-link" data-v-2b096b62 data-v-452f0eb9><a class="item active" href="/iroha-2-docs/" data-v-452f0eb9>Guide <!----></a></div></div><!--]--><!----><div class="item" data-v-2b096b62><div class="nav-link" data-v-2b096b62 data-v-452f0eb9><a class="item isExternal" href="https://github.com/hyperledger/iroha-2-docs" target="_blank" rel="noopener noreferrer" data-v-452f0eb9>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-452f0eb9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-44509ecb><nav class="nav-links nav" data-v-44509ecb data-v-2b096b62><!--[--><div class="item" data-v-2b096b62><div class="nav-link" data-v-2b096b62 data-v-452f0eb9><a class="item active" href="/iroha-2-docs/" data-v-452f0eb9>Guide <!----></a></div></div><!--]--><!----><div class="item" data-v-2b096b62><div class="nav-link" data-v-2b096b62 data-v-452f0eb9><a class="item isExternal" href="https://github.com/hyperledger/iroha-2-docs" target="_blank" rel="noopener noreferrer" data-v-452f0eb9>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-452f0eb9><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-44509ecb><!--[--><li class="sidebar-link"><p class="sidebar-link-item">Getting started</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/iroha-2-docs/">Introduction</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/iroha-2-docs/guide/build-and-install">Build and Install</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Language-specific guides</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/iroha-2-docs/guide/bash">Bash</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/iroha-2-docs/guide/python">Python 3</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/iroha-2-docs/guide/rust">Rust</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/iroha-2-docs/guide/kotlin-java">Kotlin/Java</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/iroha-2-docs/guide/javascript">JavaScript</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/iroha-2-docs/guide/conclusions">Conclusions</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/iroha-2-docs/guide/advanced/intro">Advanced Guides</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/iroha-2-docs/guide/advanced/wasm">Web Assembly</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/iroha-2-docs/guide/advanced/triggers">Triggers</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/iroha-2-docs/guide/advanced/queries">Queries</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#how-to-read-findzbyxandy-queries">How to read FindZByXAndY queries</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#pagination">Pagination</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#roles">Roles</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#findallroles">FindAllRoles</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#findallroleids">FindAllRoleIds</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#findrolebyroleid">FindRoleByRoleId</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#findrolesbyaccountid">FindRolesByAccountId</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#permissions">Permissions</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#findpermissiontokensbyaccountid">FindPermissionTokensByAccountId</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#account">Account</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#findallaccounts">FindAllAccounts</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#findaccountbyid">FindAccountById</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#findaccountkeyvaluebyidandkey">FindAccountKeyValueByIdAndKey</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#findaccountsbyname">FindAccountsByName</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#findaccountsbydomainid">FindAccountsByDomainId</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#findaccountswithasset">FindAccountsWithAsset</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#asset">Asset</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#findallassets">FindAllAssets</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#findallassetdefinitions">FindAllAssetDefinitions</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#findassetbyid">FindAssetById</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#findassetsbyname">FindAssetsByName</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#findassetsbyaccountid">FindAssetsByAccountId</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#findassetsbyassetdefinitionid">FindAssetsByAssetDefinitionId</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#findassetsbydomainid">FindAssetsByDomainId</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#findassetsbydomainidandassetdefinitionid">FindAssetsByDomainIdAndAssetDefinitionId</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#findassetquantitybyid">FindAssetQuantityById</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#findassetkeyvaluebyidandkey">FindAssetKeyValueByIdAndKey</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#findassetdefinitionkeyvaluebyidandkey">FindAssetDefinitionKeyValueByIdAndKey</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#domain">Domain</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#findalldomains">FindAllDomains</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#finddomainbyid">FindDomainById</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#finddomainkeyvaluebyidandkey">FindDomainKeyValueByIdAndKey</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#peer">Peer</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#findallpeers">FindAllPeers</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#findallparameters">FindAllParameters</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#transaction">Transaction</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#findtransactionsbyaccountid">FindTransactionsByAccountId</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#findtransactionbyhash">FindTransactionByHash</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#triggers">Triggers</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#findallactivetriggerids">FindAllActiveTriggerIds</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#findtriggerbyid">FindTriggerById</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#findtriggerkeyvaluebyidandkey">FindTriggerKeyValueByIdAndKey</a><!----></li></ul></li></ul></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/iroha-2-docs/guide/appendix/intro">Appendix</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/iroha-2-docs/guide/appendix/peer-configuration">Peer Configuration</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/iroha-2-docs/guide/appendix/client-configuration">Client Configuration</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/iroha-2-docs/guide/appendix/register-unregister">Peer Management</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/iroha-2-docs/guide/appendix/genesis">Genesis Block</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/iroha-2-docs/guide/appendix/keys">Keys</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/iroha-2-docs/guide/appendix/running-iroha-on-bare-metal">Running Iroha On Bare Metal</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-5ab2b583><div class="container" data-v-5ab2b583><!--[--><!--]--><div style="position:relative;" class="content" data-v-5ab2b583><div><h1 id="queries" tabindex="-1">Queries <a class="header-anchor" href="#queries" aria-hidden="true">#</a></h1><p>Although much of the information about the state of the blockchain can be obtained, as we&#39;ve shown before, using an event subscriber and using a filter to narrow the scope of the events to those of interest, sometimes, one needs to take a more direct approach. Enter queries. They are small instruction-like objects that, when sent to an Iroha peer, prompt a response with details from the current world state view.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>As of writing, most queries can not be filtered, but can be paginated. As such, some queries, which we&#39;ll mark with a warning sign, should be used with care, and you should think carefully about the pagination scheme.</p></div><p>In the following section we shall try to mirror the module structure of the queries and present to you what they do.</p><p>Before we proceed we should discuss a few conventions. We use the expressions <em>gets</em>, <em>returns</em>, <em>searches</em> with a precise meaning in the following (somewhat encyclopædic) section.</p><ul><li><em>gets</em>, means that the query already has the data readily available and the data is trivial. Use these queries at will;</li><li><em>returns</em>, means that the query has the data readily available, just as with <em>gets</em>, but by contrast the data is not trivial. You can still use these queries, but be mindful of the performance impact;</li><li><em>searches</em>, differs from the above two. Data must be actively collected and neither the return type, nor the collection process is cheap. Use with great care.</li></ul><p>Another convention that we follow is that the queries are provided with just one data type as input, and parameterised by the type of the output. We should take some time to explain how to interpret the data.</p><h2 id="how-to-read-findzbyxandy-queries" tabindex="-1">How to read <code>FindZByXAndY</code> queries <a class="header-anchor" href="#how-to-read-findzbyxandy-queries" aria-hidden="true">#</a></h2><p>The queries will have a <strong>Parameters</strong> and a <strong>Returns</strong> section. The parameters can either be single or multiple types, while the output is almost always either one type, or a <code>Vec&lt;Type&gt;</code> kind of construction.</p><p>When we say</p><blockquote><ul><li><strong>Parameters</strong>: <code>(X, Y)</code></li></ul></blockquote><p>we mean that in Rust source code you need to construct the query as follows:</p><div class="language-rust"><pre class="shiki shiki-light" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> query </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#953800;">FindZByXAndY</span><span style="color:#CF222E;">::</span><span style="color:#8250DF;">new</span><span style="color:#24292F;">(x</span><span style="color:#CF222E;">:</span><span style="color:#24292F;"> </span><span style="color:#953800;">X</span><span style="color:#24292F;">, y</span><span style="color:#CF222E;">:</span><span style="color:#24292F;"> </span><span style="color:#953800;">Y</span><span style="color:#24292F;">);</span></span>
<span class="line"></span></code></pre></div><p>where <code>x</code> is a variable of type <code>X</code>, and <code>y</code> — <code>Y</code> respectively. We&#39;ll provide you with information about each type, otherwise, refer to the guide for each programming language for more information.</p><p>When we say, &quot;Returns: Vec&quot;, we mean that the return value is a collection of more than one element of that type. Depending on the SDK implementation this can be a type native to the language (e.g. JavaScript) or a thin wrapper around the Rust Vec structure.</p><h2 id="pagination" tabindex="-1">Pagination <a class="header-anchor" href="#pagination" aria-hidden="true">#</a></h2><p>Submitting queries is done slightly differently in Rust. One can use <code>client.request(query)</code> to submit a query and get the full result in one go, both if you have a <code>Vec&lt;Z&gt;</code> and just <code>Z</code> as the return type.</p><p>However some queries (particularly with &quot;All&quot; in their name) can return exorbitant amounts of data. As such, one should consider pagination to reduce the load on the system.</p><p>To construct a <code>Pagination</code> all one needs to do is to call <code>client.request_with_pagination(query, pagination)</code>, where the <code>pagination</code> is constructed as follows:</p><div class="language-rust"><pre class="shiki shiki-light" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> starting_result</span><span style="color:#CF222E;">:</span><span style="color:#24292F;"> </span><span style="color:#953800;">u32</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> _;</span></span>
<span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> limit</span><span style="color:#CF222E;">:</span><span style="color:#24292F;"> </span><span style="color:#953800;">u32</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> _;</span></span>
<span class="line"><span style="color:#CF222E;">let</span><span style="color:#24292F;"> pagination </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#953800;">Pagination</span><span style="color:#CF222E;">::</span><span style="color:#8250DF;">new</span><span style="color:#24292F;">(</span><span style="color:#953800;">Some</span><span style="color:#24292F;">(starting_result), </span><span style="color:#953800;">Some</span><span style="color:#24292F;">(limit));</span></span>
<span class="line"></span></code></pre></div><h2 id="roles" tabindex="-1">Roles <a class="header-anchor" href="#roles" aria-hidden="true">#</a></h2><p>Roles are an optional feature that should be present on all Iroha 2 deployments by default, when they&#39;re compiled in the private blockchain configuration.</p><h3 id="findallroles" tabindex="-1">FindAllRoles <a class="header-anchor" href="#findallroles" aria-hidden="true">#</a></h3><ul><li><p><strong>Returns</strong>: <code>Vec&lt;Roles&gt;</code></p></li><li><p><strong>Details</strong>: It returns all roles registered as <em>global</em> (as opposed to domain-scoped) in the blockchain.</p><div class="warning custom-block"><p class="custom-block-title"> WARNING </p><p>This query returns a large volume of data.</p></div></li></ul><h3 id="findallroleids" tabindex="-1">FindAllRoleIds <a class="header-anchor" href="#findallroleids" aria-hidden="true">#</a></h3><ul><li><p><strong>Returns</strong>: <code>Vec&lt;Roles&gt;</code></p></li><li><p><strong>Details</strong>: It returns all roles registered as <em>global</em> (as opposed to domain-scoped) in the blockchain, but instead of returning the values of Roles (which contain permission tokens), we only get the Ids of the roles.</p></li></ul><h3 id="findrolebyroleid" tabindex="-1">FindRoleByRoleId <a class="header-anchor" href="#findrolebyroleid" aria-hidden="true">#</a></h3><ul><li><p><strong>Parameters</strong>: <code>RoleId</code></p></li><li><p><strong>Returns</strong>: <code>Vec&lt;Roles&gt;</code></p></li><li><p><strong>Details</strong>: It returns the role that has the provided role ID. For example, given the name of the role <code>admin</code> it will return all of the <code>admin</code>-level permission tokens.</p></li></ul><h3 id="findrolesbyaccountid" tabindex="-1">FindRolesByAccountId <a class="header-anchor" href="#findrolesbyaccountid" aria-hidden="true">#</a></h3><ul><li><p><strong>Parameters</strong>: <code>AccountId</code></p></li><li><p><strong>Returns</strong>: <code>Vec&lt;RoleId&gt;</code></p></li><li><p><strong>Details</strong>: This query returns all of the role identifiers that are attached to the given account. Note, that unlike <a href="#findallroles">the previous query</a>, we do not return the roles themselves.</p></li></ul><h2 id="permissions" tabindex="-1">Permissions <a class="header-anchor" href="#permissions" aria-hidden="true">#</a></h2><p>A semi-optional feature that depends on whether or not you want Iroha to manage a Public or Private Blockchain. Specifically, in both cases you have permissions, but in the public blockchain use-case, most accounts have the same common-sense permissions. By contrast in a private blockchain, most accounts are assumed not to be able to do anything outside of their own account or domain unless explicitly granted said permission.</p><h3 id="findpermissiontokensbyaccountid" tabindex="-1">FindPermissionTokensByAccountId <a class="header-anchor" href="#findpermissiontokensbyaccountid" aria-hidden="true">#</a></h3><ul><li><p><strong>Parameters</strong>: <code>AccountId</code></p></li><li><p><strong>Returns</strong>: <code>Vec&lt;PermissionToken&gt;</code></p></li><li><p><strong>Details</strong>: This query returns all of the permission tokens granted to the specified account.</p></li></ul><h2 id="account" tabindex="-1">Account <a class="header-anchor" href="#account" aria-hidden="true">#</a></h2><p>Most queries in Iroha pertain to accounts, and at the moment this is the most diverse set of queries.</p><h3 id="findallaccounts" tabindex="-1">FindAllAccounts <a class="header-anchor" href="#findallaccounts" aria-hidden="true">#</a></h3><ul><li><p><strong>Returns</strong>: <code>Vec&lt;Account&gt;</code></p></li><li><p><strong>Details</strong>: This query finds all accounts registered globally.</p><div class="warning custom-block"><p class="custom-block-title"> WARNING </p><p>This query returns a large volume of data.</p></div></li></ul><h3 id="findaccountbyid" tabindex="-1">FindAccountById <a class="header-anchor" href="#findaccountbyid" aria-hidden="true">#</a></h3><ul><li><p><strong>Parameters</strong>: <code>AccountId</code></p></li><li><p><strong>Returns</strong>: <code>Account</code></p></li><li><p><strong>Details</strong>: Returns the full account information corresponding to the given <code>AccountId</code>.</p></li></ul><h3 id="findaccountkeyvaluebyidandkey" tabindex="-1">FindAccountKeyValueByIdAndKey <a class="header-anchor" href="#findaccountkeyvaluebyidandkey" aria-hidden="true">#</a></h3><ul><li><p><strong>Parameters</strong>: <code>(AccountId, Name)</code></p></li><li><p><strong>Returns</strong>: <code>Value</code></p></li><li><p><strong>Details</strong>: This queries the <code>metadata</code> attached to the given account. Specifically it returns the value keyed by the provided <code>Name</code>.</p></li></ul><h3 id="findaccountsbyname" tabindex="-1">FindAccountsByName <a class="header-anchor" href="#findaccountsbyname" aria-hidden="true">#</a></h3><ul><li><p><strong>Parameters</strong>: <code>Name</code></p></li><li><p><strong>Returns</strong>: <code>Vec&lt;Account&gt;</code></p></li><li><p><strong>Details</strong>: This query returns all the accounts which have the given <code>Name</code>. This is particularly useful if you remember the name of the account, but do not, for example, recall the domain name in which it was registered.</p></li></ul><h3 id="findaccountsbydomainid" tabindex="-1">FindAccountsByDomainId <a class="header-anchor" href="#findaccountsbydomainid" aria-hidden="true">#</a></h3><ul><li><p><strong>Parameters</strong>: <code>DomainId</code></p></li><li><p><strong>Returns</strong>: <code>Vec&lt;Account&gt;</code></p></li><li><p><strong>Details</strong>: Find all of the accounts that belong to a specific domain. Note that this returns the full accounts and not the <code>AccountId</code> collection.</p><div class="warning custom-block"><p class="custom-block-title"> WARNING </p><p>This query returns a large volume of data.</p></div></li></ul><h3 id="findaccountswithasset" tabindex="-1">FindAccountsWithAsset <a class="header-anchor" href="#findaccountswithasset" aria-hidden="true">#</a></h3><ul><li><p><strong>Parameters</strong>: <code>AccountId</code></p></li><li><p><strong>Returns</strong>: <code>Vec&lt;Account&gt;</code></p></li><li><p><strong>Details</strong>: Find all of the accounts that have the given asset.</p></li></ul><h2 id="asset" tabindex="-1">Asset <a class="header-anchor" href="#asset" aria-hidden="true">#</a></h2><p>Assets include simple numbers, but also a special type of key-to-value map, that is used as a secure data storage for privileged information.</p><h3 id="findallassets" tabindex="-1">FindAllAssets <a class="header-anchor" href="#findallassets" aria-hidden="true">#</a></h3><ul><li><p><strong>Returns</strong>: <code>Vec&lt;Asset&gt;</code></p></li><li><p><strong>Details</strong>: Returns all of the known assets by value.</p><div class="warning custom-block"><p class="custom-block-title"> WARNING </p><p>This query returns a large volume of data.</p></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>You should note that this is not the same as <code>AssetDefinition</code>. If you have one asset called e.g. <code>tea#wonderland</code> that belongs to every account on the blockchain, you will receive the aggregated value across all accounts, but not the information such as the type of the asset.</p></div></li></ul><h3 id="findallassetdefinitions" tabindex="-1">FindAllAssetDefinitions <a class="header-anchor" href="#findallassetdefinitions" aria-hidden="true">#</a></h3><ul><li><p><strong>Returns</strong>: <code>Vec&lt;AssetDefinition&gt;</code></p></li><li><p><strong>Details</strong>: This query returns all known asset definitions by value.</p><div class="warning custom-block"><p class="custom-block-title"> WARNING </p><p>This query returns a large volume of data.</p></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>To reduce the load on the network, we store the definition of an asset separate from its instances. So if you want to know if an asset is mintable, or the type stored in the asset you need to query the asset definition, rather than the asset itself.</p></div></li></ul><h3 id="findassetbyid" tabindex="-1">FindAssetById <a class="header-anchor" href="#findassetbyid" aria-hidden="true">#</a></h3><ul><li><p><strong>Parameters</strong>: <code>AssetId</code></p></li><li><p><strong>Returns</strong>: <code>Asset</code></p></li><li><p><strong>Details</strong>: This query returns the aggregated data about an asset&#39;s use across the network.</p></li></ul><h3 id="findassetsbyname" tabindex="-1">FindAssetsByName <a class="header-anchor" href="#findassetsbyname" aria-hidden="true">#</a></h3><ul><li><p><strong>Parameters</strong>: <code>Name</code></p></li><li><p><strong>Returns</strong>: <code>Vec&lt;Asset&gt;</code></p></li><li><p><strong>Details</strong>: This query searches the network for all assets that match the given name.</p></li></ul><h3 id="findassetsbyaccountid" tabindex="-1">FindAssetsByAccountId <a class="header-anchor" href="#findassetsbyaccountid" aria-hidden="true">#</a></h3><ul><li><p><strong>Parameters</strong>: <code>AccountId</code></p></li><li><p><strong>Returns</strong>: <code>Vec&lt;Asset&gt;</code></p></li><li><p><strong>Details</strong>: This query returns all of the assets that belong to a single account.</p></li></ul><h3 id="findassetsbyassetdefinitionid" tabindex="-1">FindAssetsByAssetDefinitionId <a class="header-anchor" href="#findassetsbyassetdefinitionid" aria-hidden="true">#</a></h3><ul><li><p><strong>Parameters</strong>: <code>AssetDefinitionId</code></p></li><li><p><strong>Returns</strong>: <code>Vec&lt;Asset&gt;</code></p></li><li><p><strong>Details</strong>: This query will search for all of the assets that have the given definition Id.</p></li></ul><div class="warning custom-block"><p class="custom-block-title"> WARNING </p><p>This query returns a large volume of data.</p></div><h3 id="findassetsbydomainid" tabindex="-1">FindAssetsByDomainId <a class="header-anchor" href="#findassetsbydomainid" aria-hidden="true">#</a></h3><ul><li><p><strong>Parameters</strong>: <code>DomainId</code></p></li><li><p><strong>Returns</strong>: <code>Vec&lt;Asset&gt;</code></p></li><li><p><strong>Details</strong>: This query returns all assets that are registered in the current domain.</p></li></ul><div class="warning custom-block"><p class="custom-block-title"> WARNING </p><p>This query returns a large volume of data.</p></div><h3 id="findassetsbydomainidandassetdefinitionid" tabindex="-1">FindAssetsByDomainIdAndAssetDefinitionId <a class="header-anchor" href="#findassetsbydomainidandassetdefinitionid" aria-hidden="true">#</a></h3><ul><li><p><strong>Parameters</strong>: <code>(DomainId, AssetDefinitionId)</code></p></li><li><p><strong>Returns</strong>: <code>Vec&lt;Asset&gt;</code></p></li><li><p><strong>Details</strong>: This query searches the domain for assets that have the given definition id.</p></li></ul><h3 id="findassetquantitybyid" tabindex="-1">FindAssetQuantityById <a class="header-anchor" href="#findassetquantitybyid" aria-hidden="true">#</a></h3><ul><li><p><strong>Parameters</strong>: <code>AssetId</code></p></li><li><p><strong>Returns</strong>: <code>u32</code></p></li><li><p><strong>Details</strong>: This query assumes that the asset given by the identifier is of type <code>AssetValue::Quantity</code>, and returns the contained <code>u32</code>.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>This query can fail.</p></div></li></ul><h3 id="findassetkeyvaluebyidandkey" tabindex="-1">FindAssetKeyValueByIdAndKey <a class="header-anchor" href="#findassetkeyvaluebyidandkey" aria-hidden="true">#</a></h3><ul><li><p><strong>Parameters</strong>: <code>(AssetId, Name)</code></p></li><li><p><strong>Returns</strong>: <code>Value</code></p></li><li><p><strong>Details</strong>: This query gets the value keyed by the given name in the metadata of the asset corresponding to the given identifier.</p></li></ul><h3 id="findassetdefinitionkeyvaluebyidandkey" tabindex="-1">FindAssetDefinitionKeyValueByIdAndKey <a class="header-anchor" href="#findassetdefinitionkeyvaluebyidandkey" aria-hidden="true">#</a></h3><ul><li><p><strong>Parameters</strong>: <code>(AssetDefinitionId, Name)</code></p></li><li><p><strong>Returns</strong>: <code>Value</code></p></li><li><p><strong>Details</strong>: This query gets the value keyed by the given name in the metadata of the asset definition corresponding to the given identifier.</p></li></ul><h2 id="domain" tabindex="-1">Domain <a class="header-anchor" href="#domain" aria-hidden="true">#</a></h2><p>The domain is the basic unit of organisation in an Iroha blockchain. Accounts and assets must be registered inside a domain, triggers are usually scoped by domain, and most queries have the domain as a possible input.</p><h3 id="findalldomains" tabindex="-1">FindAllDomains <a class="header-anchor" href="#findalldomains" aria-hidden="true">#</a></h3><ul><li><p><strong>Returns</strong>: <code>Vec&lt;Domain&gt;</code></p></li><li><p><strong>Details</strong>: This query returns all of the known registered domains.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>This query returns the full contents of the world state view as of execution. This query should be used sparingly and for debugging purposes only.</p></div></li></ul><h3 id="finddomainbyid" tabindex="-1">FindDomainById <a class="header-anchor" href="#finddomainbyid" aria-hidden="true">#</a></h3><ul><li><p><strong>Parameters</strong>: <code>DomainId</code></p></li><li><p><strong>Returns</strong>: <code>Domain</code></p></li><li><p><strong>Details</strong>: This query gets the domain corresponding to the given identifier.</p><div class="warning custom-block"><p class="custom-block-title"> WARNING </p><p>This query returns a large volume of data.</p></div></li></ul><h3 id="finddomainkeyvaluebyidandkey" tabindex="-1">FindDomainKeyValueByIdAndKey <a class="header-anchor" href="#finddomainkeyvaluebyidandkey" aria-hidden="true">#</a></h3><ul><li><p><strong>Parameters</strong>: <code>(DomainId, Name)</code></p></li><li><p><strong>Returns</strong>: <code>Value</code></p></li><li><p><strong>Details</strong>: This query returns the value keyed by the given name in the domain corresponding to the given identifier.</p></li></ul><h2 id="peer" tabindex="-1">Peer <a class="header-anchor" href="#peer" aria-hidden="true">#</a></h2><p>A peer is the basic unit of storage and validation. In common parlance we may conflate the node and the peer binary running on the node, but in this case we specifically mean the peer binary as a server with its specific configuration.</p><h3 id="findallpeers" tabindex="-1">FindAllPeers <a class="header-anchor" href="#findallpeers" aria-hidden="true">#</a></h3><ul><li><p><strong>Returns</strong>: <code>Vec&lt;Peer&gt;</code></p></li><li><p><strong>Details</strong>: This query returns all known peers identified by their key, and accompanied by the address of the API endpoint of each.</p></li></ul><h3 id="findallparameters" tabindex="-1">FindAllParameters <a class="header-anchor" href="#findallparameters" aria-hidden="true">#</a></h3><ul><li><p><strong>Returns</strong>: <code>Vec&lt;Parameter&gt;</code></p><p>Returns the parameters used by all peers in the network. Useful to debug if any of the peers are incorrectly configured and causing view changes.</p><div class="language-rust"><pre class="shiki shiki-light" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">pub</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">enum</span><span style="color:#24292F;"> </span><span style="color:#953800;">Parameter</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#6E7781;">    /// Maximum amount of Faulty Peers in the system.</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">MaximumFaultyPeersAmount</span><span style="color:#24292F;">(</span><span style="color:#953800;">u32</span><span style="color:#24292F;">),</span></span>
<span class="line"><span style="color:#6E7781;">    /// Maximum time for a leader to create a block.</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">BlockTime</span><span style="color:#24292F;">(</span><span style="color:#953800;">u128</span><span style="color:#24292F;">),</span></span>
<span class="line"><span style="color:#6E7781;">    /// Maximum time for a proxy tail to send commit message.</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">CommitTime</span><span style="color:#24292F;">(</span><span style="color:#953800;">u128</span><span style="color:#24292F;">),</span></span>
<span class="line"><span style="color:#6E7781;">    /// Time to wait for a transaction Receipt.</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">TransactionReceiptTime</span><span style="color:#24292F;">(</span><span style="color:#953800;">u128</span><span style="color:#24292F;">),</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span></code></pre></div></li></ul><h2 id="transaction" tabindex="-1">Transaction <a class="header-anchor" href="#transaction" aria-hidden="true">#</a></h2><p>It is often necessary to query the state of specific transactions, especially for use in blockchain explorers, and for user-facing applications.</p><h3 id="findtransactionsbyaccountid" tabindex="-1">FindTransactionsByAccountId <a class="header-anchor" href="#findtransactionsbyaccountid" aria-hidden="true">#</a></h3><ul><li><p><strong>Parameters</strong>: <code>AccountId</code></p></li><li><p><strong>Returns</strong>: <code>Vec&lt;TransactionValue&gt;</code></p><div class="language-rust"><pre class="shiki shiki-light" style="background-color:#ffffff;"><code><span class="line"><span style="color:#CF222E;">pub</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">enum</span><span style="color:#24292F;"> </span><span style="color:#953800;">TransactionValue</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#6E7781;">    /// Committed transaction</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">Transaction</span><span style="color:#24292F;">(</span><span style="color:#953800;">Box</span><span style="color:#24292F;">&lt;</span><span style="color:#953800;">VersionedTransaction</span><span style="color:#24292F;">&gt;),</span></span>
<span class="line"><span style="color:#6E7781;">    /// Rejected transaction with reason of rejection</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#8250DF;">RejectedTransaction</span><span style="color:#24292F;">(</span><span style="color:#953800;">Box</span><span style="color:#24292F;">&lt;</span><span style="color:#953800;">VersionedRejectedTransaction</span><span style="color:#24292F;">&gt;),</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span></code></pre></div></li><li><p><strong>Details</strong>: This query is used to get the full set of transactions that an account has submitted throughout the existence of the blockchain.</p><div class="warning custom-block"><p class="custom-block-title"> WARNING </p><p>This query returns a large volume of data.</p></div></li></ul><h3 id="findtransactionbyhash" tabindex="-1">FindTransactionByHash <a class="header-anchor" href="#findtransactionbyhash" aria-hidden="true">#</a></h3><ul><li><p><strong>Parameters</strong>: <code>Hash</code></p></li><li><p><strong>Returns</strong>: <code>TransactionValue</code></p></li><li><p><strong>Details</strong>: This query finds the transaction by hash.</p></li></ul><h2 id="triggers" tabindex="-1">Triggers <a class="header-anchor" href="#triggers" aria-hidden="true">#</a></h2><p>Iroha is an event-driven architecture. Every modification of the world state emits a corresponding event that can be captured by appropriate event listeners called filters.</p><p>An action that executes whenever an event meeting certain conditions is emitted is called a <code>trigger</code>. The following queries are going to be invaluable for anyone writing (and debugging) smart contracts submitted into an Iroha-based blockchain.</p><h3 id="findallactivetriggerids" tabindex="-1">FindAllActiveTriggerIds <a class="header-anchor" href="#findallactivetriggerids" aria-hidden="true">#</a></h3><ul><li><p><strong>Returns</strong>: <code>Vec&lt;TriggerId&gt;</code></p></li><li><p><strong>Details</strong>: This query finds all currently active triggers, that is, triggers that have not expired at the time of the query.</p></li></ul><div class="warning custom-block"><p class="custom-block-title"> WARNING </p><p>This query returns a large volume of data.</p></div><h3 id="findtriggerbyid" tabindex="-1">FindTriggerById <a class="header-anchor" href="#findtriggerbyid" aria-hidden="true">#</a></h3><ul><li><p><strong>Parameters</strong>: <code>TriggerId</code></p></li><li><p><strong>Returns</strong>: <code>Trigger</code></p></li><li><p><strong>Details</strong>: This query finds the trigger with the given ID.</p></li></ul><h3 id="findtriggerkeyvaluebyidandkey" tabindex="-1">FindTriggerKeyValueByIdAndKey <a class="header-anchor" href="#findtriggerkeyvaluebyidandkey" aria-hidden="true">#</a></h3><ul><li><p><strong>Parameters</strong>: <code>(TriggerId, Name)</code></p></li><li><p><strong>Returns</strong>: <code>Trigger</code></p></li><li><p><strong>Details</strong>: This query finds the value corresponding to the key in the metadata of the trigger with the given ID.</p></li></ul></div></div><footer class="page-footer" data-v-5ab2b583 data-v-c710f5fe><div class="edit" data-v-c710f5fe><div class="edit-link" data-v-c710f5fe data-v-dc147d58><a class="link" href="https://github.com/hyperledger/iroha-2-docs/edit/master/src/guide/advanced/queries.md" target="_blank" rel="noopener noreferrer" data-v-dc147d58>Edit this page <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-dc147d58><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="updated" data-v-c710f5fe><p class="last-updated" data-v-c710f5fe data-v-ae38ef34><span class="prefix" data-v-ae38ef34>Last Updated:</span><span class="datetime" data-v-ae38ef34></span></p></div></footer><div class="next-and-prev-link" data-v-5ab2b583 data-v-24e45740><div class="container" data-v-24e45740><div class="prev" data-v-24e45740><a class="link" href="/iroha-2-docs/guide/advanced/triggers" data-v-24e45740><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-24e45740><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-24e45740>Triggers</span></a></div><div class="next" data-v-24e45740><a class="link" href="/iroha-2-docs/guide/appendix/intro" data-v-24e45740><span class="text" data-v-24e45740>Appendix</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-24e45740><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"api_index.md\":\"a0f90735\",\"guide_advanced_intro.md\":\"558ba168\",\"guide_advanced_queries.md\":\"97fa285d\",\"guide_advanced_triggers.md\":\"2443a101\",\"guide_advanced_wasm.md\":\"57766a45\",\"guide_appendix_client-configuration.md\":\"05e69383\",\"guide_appendix_genesis.md\":\"e9e58712\",\"guide_appendix_intro.md\":\"c8e66616\",\"guide_appendix_keys.md\":\"a9d02229\",\"guide_appendix_peer-configuration.md\":\"0a8f33a8\",\"guide_appendix_register-unregister.md\":\"8caaf836\",\"guide_appendix_running-iroha-on-bare-metal.md\":\"b0e1ccd7\",\"guide_bash.md\":\"4cb135fa\",\"guide_build-and-install.md\":\"5c2068b3\",\"guide_conclusions.md\":\"168c3df7\",\"guide_javascript.md\":\"c360d99f\",\"guide_kotlin-java.md\":\"1c5e8a65\",\"guide_python.md\":\"e63203a0\",\"guide_rust.md\":\"e2a6a02e\",\"index.md\":\"30f7eef4\"}")</script>
    <script type="module" async src="/iroha-2-docs/assets/app.0f261f37.js"></script>
    
  </body>
</html>